<%= render "shared/menu" %>

<div class="container">

	<%= form_tag nil, :method => :get, class: "zeromargin" do %>
	<h1 class="inline">RSS Pool </h1>
	<%= label_tag "account", "Account: ", class: "inline" %>
	<%= select_tag "account", options_from_collection_for_select(Account.all, "id", "name", @account_id), :prompt => 'Please select an account', class: "inline", onchange: "this.form.submit()" %>
	<% end %>

	<% if flash[:alert]%>
	<div class="alert">
		<button type="button" class="close" data-dismiss="alert">&times;</button>
		<strong>Warning!</strong> <%= flash[:alert] %>
	</div>
	<% end %>
	<% if flash[:notice]%>
	<div class="alert">
		<button type="button" class="close" data-dismiss="alert">&times;</button>
		<strong>Notice:</strong> <%= flash[:notice] %>
	</div>
	<% end %>

	<% if @account_id != 0%>
	<div class="row-fluid show-grid accordion" id="accordionacc">
		<table id="rss-table" class="table table-bordered table-hover table-fixed-header" data-account="<%= @account_id %>" data-cursor="0">
			<thead>
				<tr>
					<th>Queue <%= link_to 'New Post', new_pool_post_path, class: "btn btn-mini btn-primary" %></th>
					<% @smodules.each do |smodule| %>
					<th><%= smodule.name %>: <%= QueuePost.where(:acc_setting => AccSetting.find_by(:account => @account, :smodule => smodule)).count %></th>
					<% end %>
				</tr>
			</thead>
		</table>
	</div>
	<% end %>

</div> 

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		<h3 id="myModalLabel">Modal header</h3>
	</div>
	<div class="modal-body">
		<p>One fine body…</p>
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
		<button class="btn btn-primary">Save changes</button>
	</div>
</div>